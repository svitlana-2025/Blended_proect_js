{"version":3,"file":"wishlist.js","sources":["../src/wishlist.js"],"sourcesContent":["//Логіка сторінки Wishlist\n//Логіка сторінки Wishlist\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getProductById } from './js/products-api.js';\nimport { renderProducts, clearProducts } from './js/render-function.js';\nimport { refs } from './js/refs.js';\nimport {\n  onProductClick,\n  onModalActionsClick,\n  updateCounters,\n} from './js/handlers.js';\nimport { loadFromStorage } from './js/storage.js';\nimport { STORAGE_KEYS } from './js/constants.js';\nimport {\n  handleScroll,\n  scrollToTop,\n  showLoader,\n  hideLoader,\n} from './js/helpers.js';\n\nasync function loadWishlistProducts() {\n  showLoader();\n  const wishlistIds = loadFromStorage(STORAGE_KEYS.WISHLIST) || [];\n  clearProducts();\n\n  if (wishlistIds.length === 0) {\n    if (refs.productsList) {\n      refs.productsList.innerHTML =\n        '<li class=\"wishlist-empty-message\">Your wishlist is empty.</li>';\n    }\n    hideLoader();\n    return;\n  }\n\n  try {\n    const productPromises = wishlistIds.map(id => getProductById(id));\n    const products = await Promise.all(productPromises);\n    renderProducts(products);\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load wishlist products.',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\n/**\n * Обробник кастомної події оновлення localStorage.\n * @param {CustomEvent} event\n */\nfunction handleStorageUpdate(event) {\n  // Перевіряємо, чи оновився саме список бажань\n  if (event.detail.key === STORAGE_KEYS.WISHLIST) {\n    loadWishlistProducts();\n  }\n}\n\nfunction initializeWishlistPage() {\n  updateCounters();\n  loadWishlistProducts();\n\n  if (refs.productsList)\n    refs.productsList.addEventListener('click', onProductClick);\n  if (refs.modalActions)\n    refs.modalActions.addEventListener('click', onModalActionsClick);\n  if (refs.scrollUpBtn) {\n    window.addEventListener('scroll', handleScroll);\n    refs.scrollUpBtn.addEventListener('click', scrollToTop);\n  }\n  // Встановлюємо слухача кастомної події 'storageUpdated'\n  // для оновлення списку бажань при зміні localStorage\n  document.addEventListener('storageUpdated', handleStorageUpdate);\n}\n\ndocument.addEventListener('DOMContentLoaded', initializeWishlistPage);"],"names":["loadWishlistProducts","showLoader","wishlistIds","loadFromStorage","STORAGE_KEYS","clearProducts","refs","hideLoader","productPromises","id","getProductById","products","renderProducts","iziToast","handleStorageUpdate","event","initializeWishlistPage","updateCounters","onProductClick","onModalActionsClick","handleScroll","scrollToTop"],"mappings":"sLAqBA,eAAeA,GAAuB,CACpCC,IACA,MAAMC,EAAcC,EAAgBC,EAAa,QAAQ,GAAK,CAAA,EAG9D,GAFAC,IAEIH,EAAY,SAAW,EAAG,CACxBI,EAAK,eACPA,EAAK,aAAa,UAChB,mEAEJC,IACA,MACD,CAED,GAAI,CACF,MAAMC,EAAkBN,EAAY,IAAIO,GAAMC,EAAeD,CAAE,CAAC,EAC1DE,EAAW,MAAM,QAAQ,IAAIH,CAAe,EAClDI,EAAeD,CAAQ,CACxB,MAAe,CACdE,EAAS,MAAM,CACb,MAAO,QACP,QAAS,mCACf,CAAK,CACL,QAAY,CACRN,GACD,CACH,CAMA,SAASO,EAAoBC,EAAO,CAE9BA,EAAM,OAAO,MAAQX,EAAa,UACpCJ,GAEJ,CAEA,SAASgB,GAAyB,CAChCC,IACAjB,IAEIM,EAAK,cACPA,EAAK,aAAa,iBAAiB,QAASY,CAAc,EACxDZ,EAAK,cACPA,EAAK,aAAa,iBAAiB,QAASa,CAAmB,EAC7Db,EAAK,cACP,OAAO,iBAAiB,SAAUc,CAAY,EAC9Cd,EAAK,YAAY,iBAAiB,QAASe,CAAW,GAIxD,SAAS,iBAAiB,iBAAkBP,CAAmB,CACjE,CAEA,SAAS,iBAAiB,mBAAoBE,CAAsB"}