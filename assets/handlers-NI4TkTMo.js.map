{"version":3,"file":"handlers-NI4TkTMo.js","sources":["../../src/js/constants.js","../../src/js/products-api.js","../../src/js/refs.js","../../src/js/render-function.js","../../src/js/modal.js","../../src/js/storage.js","../../src/js/helpers.js","../../src/js/handlers.js"],"sourcesContent":["//Константи\n\nexport const BASE_URL = 'https://dummyjson.com';\n\nexport const STORAGE_KEYS = {\n  CART: 'cart',\n  WISHLIST: 'wishlist',\n  THEME: 'theme',\n};","// Функції для роботи з бекендом\nimport { BASE_URL } from './constants.js';\n\nasync function handleResponse(response) {\n  if (!response.ok) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n  return response.json();\n}\n\nexport async function getProducts(page = 1, limit = 12) {\n  const skip = (page - 1) * limit;\n  const response = await fetch(\n    `${BASE_URL}/products?limit=${limit}&skip=${skip}`\n  );\n  return handleResponse(response);\n}\n\nexport async function getProductById(id) {\n  const response = await fetch(`${BASE_URL}/products/${id}`);\n  return handleResponse(response);\n}\n\nexport async function searchProducts(query, page = 1, limit = 12) {\n  const skip = (page - 1) * limit;\n  const response = await fetch(\n    `${BASE_URL}/products/search?q=${query}&limit=${limit}&skip=${skip}`\n  );\n  return handleResponse(response);\n}\n\nexport async function getProductCategories() {\n  const response = await fetch(`${BASE_URL}/products/category-list`);\n  return handleResponse(response);\n}\n\nexport async function getProductsByCategory(category, page = 1, limit = 12) {\n  const skip = (page - 1) * limit;\n  const response = await fetch(\n    `${BASE_URL}/products/category/${category}?limit=${limit}&skip=${skip}`\n  );\n  return handleResponse(response);\n}","//Обʼєкт з посиланнями на ДОМ елементи\nexport const refs = {\n  // --- Загальні елементи ---\n  loader: document.querySelector('.loader'),\n  scrollUpBtn: document.querySelector('.scroll-up'),\n\n  // --- Хедер ---\n  searchForm: document.querySelector('.search-form'),\n  searchInput: document.querySelector('.search-form__input'),\n  searchClearBtn: document.querySelector('.search-form__btn-clear'),\n  wishlistCount: document.querySelector('[data-wishlist-count]'),\n  cartCount: document.querySelector('[data-cart-count]'),\n\n  // --- Основний контент (ul.products використовується на всіх сторінках) ---\n  productsList: document.querySelector('ul.products'),\n\n  // --- Сторінка Home ---\n  categoriesList: document.querySelector('ul.categories'),\n  loadMoreBtn: document.querySelector('.load-more'),\n  notFoundMessage: document.querySelector('.not-found'),\n\n  // --- Модальне окно ---\n  modal: document.querySelector('.modal'),\n  modalProduct: document.querySelector('.modal-product'),\n  modalCloseBtn: document.querySelector('.modal__close-btn'),\n  modalActions: document.querySelector('.modal-product__actions'),\n\n  // --- Сторінка Cart ---\n  cartTotalItems: document.querySelector('[data-count]'),\n  cartTotalPrice: document.querySelector('[data-price]'),\n  cartBuyBtn: document.querySelector('.cart-summary__btn'),\n};","//Функцію для створення, рендеру або видалення розмітки\nimport { refs } from './refs.js';\n\n/**\n * Очищує список продуктів у DOM.\n */\nexport function clearProducts() {\n  if (refs.productsList) {\n    refs.productsList.innerHTML = '';\n  }\n}\n\n/**\n * Рендерить список категорій.\n * @param {string[]} categories Масив назв категорій\n */\nexport function renderCategories(categories) {\n  if (!refs.categoriesList) return;\n  const markup = categories\n    .map(\n      category => `\n    <li class=\"categories__item\">\n      <button class=\"categories__btn\" type=\"button\">${category}</button>\n    </li>\n  `\n    )\n    .join('');\n  refs.categoriesList.innerHTML = markup;\n  const allCategoryBtn = refs.categoriesList.querySelector('button');\n  if (allCategoryBtn) {\n    allCategoryBtn.classList.add('categories__btn--active');\n  }\n}\n\n/**\n * Рендерить список продуктів.\n * @param {object[]} products Масив об'єктів продуктів\n */\nexport function renderProducts(products) {\n  if (!refs.productsList) return;\n  const markup = products\n    .map(\n      ({ id, title, brand, category, price, thumbnail }) => `\n    <li class=\"products__item\" data-id=\"${id}\">\n        <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\"/>\n        <div class=\"products__info\">\n            <h3 class=\"products__title\">${title}</h3>\n            <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:</span> ${brand}</p>\n            <p class=\"products__category\">Category: ${category}</p>\n            <p class=\"products__price\">Price: $${price}</p>\n        </div>\n    </li>\n  `\n    )\n    .join('');\n  refs.productsList.insertAdjacentHTML('beforeend', markup);\n}\n\n/**\n * Рендерить розмітку для одного продукту в модальному вікні.\n * @param {object} product Об'єкт продукту\n */\nexport function renderProductModal(product) {\n  if (!refs.modalProduct) return;\n  const {\n    title,\n    description,\n    price,\n    thumbnail,\n    shippingInformation,\n    returnPolicy,\n  } = product;\n  const markup = `\n    <img class=\"modal-product__img\" src=\"${thumbnail}\" alt=\"${title}\" />\n      <div class=\"modal-product__content\">\n        <h2 class=\"modal-product__title\">${title}</h2>\n        <div class=\"modal-product__details\">\n            <p class=\"modal-product__price\">Price: $${price}</p>\n            <p class=\"modal-product__description\">${description}</p>\n            <p class=\"modal-product__shipping-information\"><b>Shipping:</b> ${shippingInformation}</p>\n            <p class=\"modal-product__return-policy\"><b>Return Policy:</b> ${returnPolicy}</p>\n        </div>\n      </div>\n    `;\n  // Заповнюємо контейнер .modal-product\n  refs.modalProduct.innerHTML = markup;\n}","//Описана робота модалки - відкриття закриття і все що з модалкою повʼязано\nimport { refs } from './refs.js';\n\nfunction onEscKeyPress(event) {\n  if (event.code === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction onBackdropClick(event) {\n  if (event.currentTarget === event.target) {\n    closeModal();\n  }\n}\n\nexport function openModal() {\n  if (!refs.modal) return;\n  refs.modal.classList.add('modal--is-open');\n  document.body.style.overflow = 'hidden';\n  document.addEventListener('keydown', onEscKeyPress);\n  refs.modal.addEventListener('click', onBackdropClick);\n}\n\nexport function closeModal() {\n  if (!refs.modal) return;\n  refs.modal.classList.remove('modal--is-open');\n  document.body.style.overflow = 'auto';\n  document.removeEventListener('keydown', onEscKeyPress);\n  refs.modal.removeEventListener('click', onBackdropClick);\n}\n\n// Глобальний слухач для кнопки закриття\nif (refs.modalCloseBtn) {\n  refs.modalCloseBtn.addEventListener('click', closeModal);\n}","//Робота з loacalStorage\nexport const saveToStorage = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nexport const loadFromStorage = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};","//Допоміжні функції\nimport { refs } from './refs.js';\n\n// --- Лоадер ---\nexport function showLoader() {\n  if (refs.loader) {\n    refs.loader.classList.remove('hidden');\n  }\n  if (refs.loadMoreBtn) {\n    refs.loadMoreBtn.classList.add('hidden');\n  }\n  // Приховуємо основний контент під час завантаження\n  if (refs.categoriesList) {\n    refs.categoriesList.classList.add('hidden');\n  }\n  if (refs.productsList) {\n    refs.productsList.classList.add('hidden');\n  }\n}\n\nexport function showLoaderForLoadMore() {\n  if (refs.loader) {\n    refs.loader.classList.remove('hidden');\n  }\n  if (refs.loadMoreBtn) {\n    refs.loadMoreBtn.classList.add('hidden');\n  }\n}\n\nexport function hideLoader() {\n  if (refs.loader) {\n    refs.loader.classList.add('hidden');\n  }\n  // Показуємо основний контент після завантаження\n  if (refs.categoriesList) {\n    refs.categoriesList.classList.remove('hidden');\n  }\n  if (refs.productsList) {\n    refs.productsList.classList.remove('hidden');\n  }\n}\n\n// --- Кнопка \"Вверх\" ---\nexport function handleScroll() {\n  if (refs.scrollUpBtn) {\n    if (window.scrollY > 300) {\n      refs.scrollUpBtn.classList.add('show');\n    } else {\n      refs.scrollUpBtn.classList.remove('show');\n    }\n  }\n}\n\nexport function scrollToTop() {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n}","// Функції, які передаються колбеками в addEventListners\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport {\n  getProductById,\n  getProducts,\n  getProductsByCategory,\n  searchProducts,\n} from './products-api.js';\nimport { refs } from './refs.js';\nimport {\n  renderProductModal,\n  renderProducts,\n  clearProducts,\n} from './render-function.js';\nimport { openModal } from './modal.js';\nimport { saveToStorage, loadFromStorage } from './storage.js';\nimport { STORAGE_KEYS } from './constants.js';\nimport { showLoader, showLoaderForLoadMore, hideLoader } from './helpers.js';\n\nlet currentPage = 1;\nlet currentCategory = 'All';\nlet currentSearchQuery = '';\n\nexport function updateCounters() {\n  const cart = loadFromStorage(STORAGE_KEYS.CART) || [];\n  const wishlist = loadFromStorage(STORAGE_KEYS.WISHLIST) || [];\n  if (refs.cartCount) {\n    refs.cartCount.textContent = cart.length;\n    refs.cartCount.dataset.cartCount = cart.length;\n  }\n  if (refs.wishlistCount) {\n    refs.wishlistCount.textContent = wishlist.length;\n    refs.wishlistCount.dataset.wishlistCount = wishlist.length;\n  }\n}\n\nfunction updateModalButtons(productId) {\n  const numericProductId = Number(productId);\n  const cart = loadFromStorage(STORAGE_KEYS.CART) || [];\n  const wishlist = loadFromStorage(STORAGE_KEYS.WISHLIST) || [];\n\n  // Знаходимо кнопки не в динамічному контенті, а в самому модальному вікні\n  const addToCartBtn = refs.modal.querySelector('.modal-product__btn--cart');\n  const addToWishlistBtn = refs.modal.querySelector(\n    '.modal-product__btn--wishlist'\n  );\n\n  if (!addToCartBtn || !addToWishlistBtn) return;\n\n  addToCartBtn.dataset.id = numericProductId;\n  addToWishlistBtn.dataset.id = numericProductId;\n  addToCartBtn.textContent = cart.includes(numericProductId)\n    ? 'Remove from Cart'\n    : 'Add to Cart';\n  addToWishlistBtn.textContent = wishlist.includes(numericProductId)\n    ? 'Remove from Wishlist'\n    : 'Add to Wishlist';\n}\n\nfunction toggleProductInStorage(storageKey, productId, button, storageName) {\n  let items = loadFromStorage(storageKey) || [];\n  if (items.includes(productId)) {\n    items = items.filter(id => id !== productId);\n    button.textContent = `Add to ${storageName}`;\n    iziToast.info({\n      title: 'Removed',\n      message: `Product removed from ${storageName}.`,\n      position: 'topRight',\n    });\n  } else {\n    items.push(productId);\n    button.textContent = `Remove from ${storageName}`;\n    iziToast.success({\n      title: 'Added',\n      message: `Product added to ${storageName}.`,\n      position: 'topRight',\n    });\n  }\n  saveToStorage(storageKey, items);\n  updateCounters();\n\n  // Створюємо та відправляємо кастомну подію на сторынках cart і wishlist\n  const event = new CustomEvent('storageUpdated', {\n    detail: { key: storageKey },\n  });\n  document.dispatchEvent(event);\n}\n\nexport async function onProductClick(event) {\n  const productCard = event.target.closest('.products__item');\n  if (!productCard) return;\n\n  const productId = productCard.dataset.id;\n  showLoader();\n  try {\n    const product = await getProductById(productId);\n    renderProductModal(product); // Рендеримо тільки дані продукту\n    updateModalButtons(productId); // Оновлюємо існуючі кнопки\n    openModal();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch product details.',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nexport function onModalActionsClick(event) {\n  const button = event.target.closest('.modal-product__btn');\n  if (!button) return;\n\n  const productId = Number(button.dataset.id);\n  if (!productId) return;\n\n  if (button.classList.contains('modal-product__btn--cart')) {\n    toggleProductInStorage(STORAGE_KEYS.CART, productId, button, 'Cart');\n  } else if (button.classList.contains('modal-product__btn--wishlist')) {\n    toggleProductInStorage(\n      STORAGE_KEYS.WISHLIST,\n      productId,\n      button,\n      'Wishlist'\n    );\n  }\n}\n\nexport async function onCategoryClick(event) {\n  const button = event.target.closest('.categories__btn');\n  if (!button) return;\n\n  const category = button.textContent;\n  const activeBtn = document.querySelector('.categories__btn--active');\n  if (activeBtn) activeBtn.classList.remove('categories__btn--active');\n  button.classList.add('categories__btn--active');\n\n  clearProducts();\n  currentPage = 1;\n  currentCategory = category;\n  currentSearchQuery = '';\n  if (refs.loadMoreBtn) refs.loadMoreBtn.classList.remove('hidden');\n  if (refs.notFoundMessage)\n    refs.notFoundMessage.classList.remove('not-found--visible');\n  showLoader();\n\n  try {\n    const data =\n      category === 'All'\n        ? await getProducts(currentPage)\n        : await getProductsByCategory(category, currentPage);\n    if (data.products.length === 0) {\n      if (refs.notFoundMessage)\n        refs.notFoundMessage.classList.add('not-found--visible');\n      if (refs.loadMoreBtn) refs.loadMoreBtn.classList.remove('hidden');\n    } else {\n      renderProducts(data.products);\n      const totalRendered = (currentPage - 1) * 12 + data.products.length;\n      if (totalRendered < data.total) {\n        if (refs.loadMoreBtn) refs.loadMoreBtn.classList.remove('hidden');\n      } else {\n        if (refs.loadMoreBtn) refs.loadMoreBtn.classList.add('hidden');\n      }\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: 'Failed to fetch products.' });\n  } finally {\n    hideLoader();\n  }\n}\n\nexport async function onSearchFormSubmit(event) {\n  event.preventDefault();\n  const query = refs.searchInput.value.trim();\n  if (!query) return;\n\n  clearProducts();\n  currentPage = 1;\n  currentSearchQuery = query;\n  currentCategory = '';\n  if (refs.loadMoreBtn) {\n    refs.loadMoreBtn.classList.remove('hidden');\n  }\n  if (refs.notFoundMessage)\n    refs.notFoundMessage.classList.remove('not-found--visible');\n  showLoader();\n\n  try {\n    const data = await searchProducts(query, currentPage);\n    if (data.products.length === 0) {\n      if (refs.notFoundMessage)\n        refs.notFoundMessage.classList.add('not-found--visible');\n      if (refs.loadMoreBtn) {\n        refs.loadMoreBtn.classList.remove('hidden');\n      }\n    } else {\n      renderProducts(data.products);\n      const totalRendered = (currentPage - 1) * 12 + data.products.length;\n      if (totalRendered < data.total) {\n        if (refs.loadMoreBtn) refs.loadMoreBtn.classList.remove('hidden');\n      } else {\n        if (refs.loadMoreBtn) refs.loadMoreBtn.classList.add('hidden');\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to search for products.',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nexport async function onLoadMoreClick() {\n  currentPage += 1;\n  showLoaderForLoadMore();\n  try {\n    const data = currentSearchQuery\n      ? await searchProducts(currentSearchQuery, currentPage)\n      : currentCategory === 'All' || !currentCategory\n      ? await getProducts(currentPage)\n      : await getProductsByCategory(currentCategory, currentPage);\n\n    renderProducts(data.products);\n\n    const totalRendered = (currentPage - 1) * 12 + data.products.length;\n    if (totalRendered >= data.total) {\n      iziToast.info({\n        title: 'Info',\n        message: \"You've reached the end of the product list.\",\n        position: 'topRight',\n      });\n    } else {\n      if (refs.loadMoreBtn) refs.loadMoreBtn.classList.remove('hidden');\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load more products.',\n    });\n  } finally {\n    hideLoader();\n  }\n}"],"names":["BASE_URL","STORAGE_KEYS","handleResponse","response","getProducts","page","limit","skip","getProductById","id","searchProducts","query","getProductCategories","getProductsByCategory","category","refs","clearProducts","renderCategories","categories","markup","allCategoryBtn","renderProducts","products","title","brand","price","thumbnail","renderProductModal","product","description","shippingInformation","returnPolicy","onEscKeyPress","event","closeModal","onBackdropClick","openModal","saveToStorage","key","value","serializedState","error","loadFromStorage","showLoader","showLoaderForLoadMore","hideLoader","handleScroll","scrollToTop","currentPage","currentCategory","currentSearchQuery","updateCounters","cart","wishlist","updateModalButtons","productId","numericProductId","addToCartBtn","addToWishlistBtn","toggleProductInStorage","storageKey","button","storageName","items","iziToast","onProductClick","productCard","onModalActionsClick","onCategoryClick","activeBtn","data","onSearchFormSubmit","onLoadMoreClick"],"mappings":"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"}