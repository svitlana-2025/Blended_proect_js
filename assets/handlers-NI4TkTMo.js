import{i as d}from"./vendor-I1I71QQ2.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();const p="https://dummyjson.com",l={CART:"cart",WISHLIST:"wishlist",THEME:"theme"};async function f(o){if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return o.json()}async function M(o=1,e=12){const s=(o-1)*e,n=await fetch(`${p}/products?limit=${e}&skip=${s}`);return f(n)}async function P(o){const e=await fetch(`${p}/products/${o}`);return f(e)}async function C(o,e=1,s=12){const n=(e-1)*s,r=await fetch(`${p}/products/search?q=${o}&limit=${s}&skip=${n}`);return f(r)}async function A(){const o=await fetch(`${p}/products/category-list`);return f(o)}async function B(o,e=1,s=12){const n=(e-1)*s,r=await fetch(`${p}/products/category/${o}?limit=${s}&skip=${n}`);return f(r)}const t={loader:document.querySelector(".loader"),scrollUpBtn:document.querySelector(".scroll-up"),searchForm:document.querySelector(".search-form"),searchInput:document.querySelector(".search-form__input"),searchClearBtn:document.querySelector(".search-form__btn-clear"),wishlistCount:document.querySelector("[data-wishlist-count]"),cartCount:document.querySelector("[data-cart-count]"),productsList:document.querySelector("ul.products"),categoriesList:document.querySelector("ul.categories"),loadMoreBtn:document.querySelector(".load-more"),notFoundMessage:document.querySelector(".not-found"),modal:document.querySelector(".modal"),modalProduct:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),modalActions:document.querySelector(".modal-product__actions"),cartTotalItems:document.querySelector("[data-count]"),cartTotalPrice:document.querySelector("[data-price]"),cartBuyBtn:document.querySelector(".cart-summary__btn")};function b(){t.productsList&&(t.productsList.innerHTML="")}function H(o){if(!t.categoriesList)return;const e=o.map(n=>`
    <li class="categories__item">
      <button class="categories__btn" type="button">${n}</button>
    </li>
  `).join("");t.categoriesList.innerHTML=e;const s=t.categoriesList.querySelector("button");s&&s.classList.add("categories__btn--active")}function L(o){if(!t.productsList)return;const e=o.map(({id:s,title:n,brand:r,category:c,price:i,thumbnail:y})=>`
    <li class="products__item" data-id="${s}">
        <img class="products__image" src="${y}" alt="${n}"/>
        <div class="products__info">
            <h3 class="products__title">${n}</h3>
            <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${r}</p>
            <p class="products__category">Category: ${c}</p>
            <p class="products__price">Price: $${i}</p>
        </div>
    </li>
  `).join("");t.productsList.insertAdjacentHTML("beforeend",e)}function T(o){if(!t.modalProduct)return;const{title:e,description:s,price:n,thumbnail:r,shippingInformation:c,returnPolicy:i}=o,y=`
    <img class="modal-product__img" src="${r}" alt="${e}" />
      <div class="modal-product__content">
        <h2 class="modal-product__title">${e}</h2>
        <div class="modal-product__details">
            <p class="modal-product__price">Price: $${n}</p>
            <p class="modal-product__description">${s}</p>
            <p class="modal-product__shipping-information"><b>Shipping:</b> ${c}</p>
            <p class="modal-product__return-policy"><b>Return Policy:</b> ${i}</p>
        </div>
      </div>
    `;t.modalProduct.innerHTML=y}function w(o){o.code==="Escape"&&_()}function $(o){o.currentTarget===o.target&&_()}function q(){t.modal&&(t.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",document.addEventListener("keydown",w),t.modal.addEventListener("click",$))}function _(){t.modal&&(t.modal.classList.remove("modal--is-open"),document.body.style.overflow="auto",document.removeEventListener("keydown",w),t.modal.removeEventListener("click",$))}t.modalCloseBtn&&t.modalCloseBtn.addEventListener("click",_);const R=(o,e)=>{try{const s=JSON.stringify(e);localStorage.setItem(o,s)}catch(s){console.error("Set state error: ",s.message)}},m=o=>{try{const e=localStorage.getItem(o);return e===null?void 0:JSON.parse(e)}catch(e){console.error("Get state error: ",e.message)}};function v(){t.loader&&t.loader.classList.remove("hidden"),t.loadMoreBtn&&t.loadMoreBtn.classList.add("hidden"),t.categoriesList&&t.categoriesList.classList.add("hidden"),t.productsList&&t.productsList.classList.add("hidden")}function E(){t.loader&&t.loader.classList.remove("hidden"),t.loadMoreBtn&&t.loadMoreBtn.classList.add("hidden")}function g(){t.loader&&t.loader.classList.add("hidden"),t.categoriesList&&t.categoriesList.classList.remove("hidden"),t.productsList&&t.productsList.classList.remove("hidden")}function O(){t.scrollUpBtn&&(window.scrollY>300?t.scrollUpBtn.classList.add("show"):t.scrollUpBtn.classList.remove("show"))}function x(){window.scrollTo({top:0,behavior:"smooth"})}let a=1,u="All",h="";function I(){const o=m(l.CART)||[],e=m(l.WISHLIST)||[];t.cartCount&&(t.cartCount.textContent=o.length,t.cartCount.dataset.cartCount=o.length),t.wishlistCount&&(t.wishlistCount.textContent=e.length,t.wishlistCount.dataset.wishlistCount=e.length)}function k(o){const e=Number(o),s=m(l.CART)||[],n=m(l.WISHLIST)||[],r=t.modal.querySelector(".modal-product__btn--cart"),c=t.modal.querySelector(".modal-product__btn--wishlist");!r||!c||(r.dataset.id=e,c.dataset.id=e,r.textContent=s.includes(e)?"Remove from Cart":"Add to Cart",c.textContent=n.includes(e)?"Remove from Wishlist":"Add to Wishlist")}function S(o,e,s,n){let r=m(o)||[];r.includes(e)?(r=r.filter(i=>i!==e),s.textContent=`Add to ${n}`,d.info({title:"Removed",message:`Product removed from ${n}.`,position:"topRight"})):(r.push(e),s.textContent=`Remove from ${n}`,d.success({title:"Added",message:`Product added to ${n}.`,position:"topRight"})),R(o,r),I();const c=new CustomEvent("storageUpdated",{detail:{key:o}});document.dispatchEvent(c)}async function W(o){const e=o.target.closest(".products__item");if(!e)return;const s=e.dataset.id;v();try{const n=await P(s);T(n),k(s),q()}catch{d.error({title:"Error",message:"Failed to fetch product details."})}finally{g()}}function j(o){const e=o.target.closest(".modal-product__btn");if(!e)return;const s=Number(e.dataset.id);s&&(e.classList.contains("modal-product__btn--cart")?S(l.CART,s,e,"Cart"):e.classList.contains("modal-product__btn--wishlist")&&S(l.WISHLIST,s,e,"Wishlist"))}async function U(o){const e=o.target.closest(".categories__btn");if(!e)return;const s=e.textContent,n=document.querySelector(".categories__btn--active");n&&n.classList.remove("categories__btn--active"),e.classList.add("categories__btn--active"),b(),a=1,u=s,h="",t.loadMoreBtn&&t.loadMoreBtn.classList.remove("hidden"),t.notFoundMessage&&t.notFoundMessage.classList.remove("not-found--visible"),v();try{const r=s==="All"?await M(a):await B(s,a);r.products.length===0?(t.notFoundMessage&&t.notFoundMessage.classList.add("not-found--visible"),t.loadMoreBtn&&t.loadMoreBtn.classList.remove("hidden")):(L(r.products),(a-1)*12+r.products.length<r.total?t.loadMoreBtn&&t.loadMoreBtn.classList.remove("hidden"):t.loadMoreBtn&&t.loadMoreBtn.classList.add("hidden"))}catch{d.error({title:"Error",message:"Failed to fetch products."})}finally{g()}}async function N(o){o.preventDefault();const e=t.searchInput.value.trim();if(e){b(),a=1,h=e,u="",t.loadMoreBtn&&t.loadMoreBtn.classList.remove("hidden"),t.notFoundMessage&&t.notFoundMessage.classList.remove("not-found--visible"),v();try{const s=await C(e,a);s.products.length===0?(t.notFoundMessage&&t.notFoundMessage.classList.add("not-found--visible"),t.loadMoreBtn&&t.loadMoreBtn.classList.remove("hidden")):(L(s.products),(a-1)*12+s.products.length<s.total?t.loadMoreBtn&&t.loadMoreBtn.classList.remove("hidden"):t.loadMoreBtn&&t.loadMoreBtn.classList.add("hidden"))}catch{d.error({title:"Error",message:"Failed to search for products."})}finally{g()}}}async function z(){a+=1,E();try{const o=h?await C(h,a):u==="All"||!u?await M(a):await B(u,a);L(o.products),(a-1)*12+o.products.length>=o.total?d.info({title:"Info",message:"You've reached the end of the product list.",position:"topRight"}):t.loadMoreBtn&&t.loadMoreBtn.classList.remove("hidden")}catch{d.error({title:"Error",message:"Failed to load more products."})}finally{g()}}export{l as S,j as a,v as b,b as c,g as d,L as e,U as f,P as g,O as h,N as i,z as j,A as k,m as l,M as m,H as n,W as o,R as p,t as r,x as s,I as u};
//# sourceMappingURL=handlers-NI4TkTMo.js.map
